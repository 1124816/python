taxi = [[[8,"t"],[9,"t"],[46,"b"],[58,"b"],[46,"u"]],
[[10,"t"],[20,"t"]],
[[4,"t"],[11,"t"],[12,"t"],[22,"b"],[23,"b"]],
[[3,"t"],[13,"t"]],
[[15,"t"],[16,"t"]],
[[7,"t"],[29,"t"]],
[[6,"t"],[17,"t"],[42,"b"]],
[[1,"t"],[18,"t"],[19,"t"]],
[[1,"t"],[19,"t"],[20,"t"]],
[[2,"t"],[11,"t"],[21,"t"],[34,"t"]],
[[3,"t"],[10,"t"],[22,"t"]],
[[3,"t"],[23,"t"]],
[[4,"t"],[23,"t"],[24,"t"],[14,"b"],[23,"b"],[52,"b"],[46,"u"],[67,"u"],[89,"u"]],
[[15,"t"],[25,"t"],[13,"b"],[15,"b"]],[[5,"t"],[14,"t"],[16,"t"],[26,"t"],[28,"t"],[14,"b"],[29,"b"],[41,"b"]],[[5,"t"],[15,"t"],[28,"t"],[29,"t"]],[[7,"t"],[29,"t"],[30,"t"]],[[8,"t"],[31,"t"],[43,"t"]],[[8,"t"],[9,"t"],[32,"t"]],[[2,"t"],[9,"t"],[33,"t"]],[[10,"t"],[33,"t"]],[[11,"t"],[23,"t"],[34,"t"],[35,"t"],[3,"b"],[23,"b"],[34,"b"],[65,"b"]],[[12,"t"],[13,"t"],[22,"t"],[37,"t"],[3,"b"],[13,"b"],[22,"b"],[67,"b"]],[[13,"t"],[37,"t"],[38,"t"]],[[14,"t"],[38,"t"],[39,"t"]],[[15,"t"],[27,"t"],[39,"t"]],[[26,"t"],[28,"t"],[40,"t"]],[[15,"t"],[16,"t"],[27,"t"],[41,"t"]],[[6,"t"],[16,"t"],[17,"t"],[41,"t"],[42,"t"],[15,"b"],[41,"b"],[42,"b"],[55,"b"]],[[17,"t"],[42,"t"]],[[18,"t"],[43,"t"],[44,"t"]],[[19,"t"],[33,"t"],[44,"t"],[45,"t"]],[[20,"t"],[21,"t"],[32,"t"],[46,"t"]],[[10,"t"],[22,"t"],[47,"t"],[48,"t"],[22,"b"],[46,"b"],[63,"b"]],[[22,"t"],[36,"t"],[48,"t"],[65,"t"]],[[35,"t"],[37,"t"],[49,"t"]],[[23,"t"],[24,"t"],[36,"t"],[50,"t"]],[[24,"t"],[25,"t"],[50,"t"],[51,"t"]],[[25,"t"],[26,"t"],[51,"t"],[52,"t"]],[[27,"t"],[41,"t"],[52,"t"],[53,"t"]],[[28,"t"],[29,"t"],[40,"t"],[54,"t"],[15,"b"],[29,"b"],[52,"b"],[87,"b"]],[[29,"t"],[30,"t"],[56,"t"],[72,"t"],[7,"b"],[29,"b"],[72,"b"]],[[18,"t"],[31,"t"],[57,"t"]],[[31,"t"],[32,"t"],[58,"t"]],[[32,"t"],[46,"t"],[58,"t"],[59,"t"],[60,"t"]],[[33,"t"],[45,"t"],[47,"t"],[61,"t"],[1,"b"],[34,"b"],[58,"b"],[78,"b"],[1,"u"],[13,"u"],[74,"u"],[79,"u"]],[[34,"t"],[46,"t"],[62,"t"]],[[34,"t"],[35,"t"],[62,"t"],[63,"t"]],[[36,"t"],[50,"t"],[66,"t"]],[[37,"t"],[38,"t"],[49,"t"]],[[68,"t"],[38,"t"],[39,"t"],[52,"t"],[67,"t"]],[[39,"t"],[40,"t"],[51,"t"],[69,"t"],[13,"b"],[41,"b"],[67,"b"],[86,"b"]],[[40,"t"],[54,"t"],[69,"t"]],[[41,"t"],[53,"t"],[55,"t"],[70,"t"]],[[54,"t"],[71,"t"],[29,"b"],[89,"b"]],[[42,"t"],[91,"t"]],[[43,"t"],[58,"t"],[73,"t"]],[[44,"t"],[45,"t"],[57,"t"],[59,"t"],[74,"t"],[75,"t"],[1,"b"],[46,"b"],[74,"b"],[77,"b"]],[[45,"t"],[58,"t"],[75,"t"],[76,"t"]],[[45,"t"],[61,"t"],[76,"t"]],[[46,"t"],[60,"t"],[62,"t"],[76,"t"],[78,"t"]],[[47,"t"],[48,"t"],[61,"t"],[79,"t"]],[[48,"t"],[64,"t"],[79,"t"],[80,"t"],[34,"b"],[65,"b"],[79,"b"],[100,"b"]],[[63,"t"],[65,"t"],[81,"t"]],[[35,"t"],[64,"t"],[66,"t"],[82,"t"],[22,"b"],[63,"b"],[67,"b"],[82,"b"]],[[49,"t"],[65,"t"],[67,"t"],[82,"t"]],[[51,"t"],[66,"t"],[68,"t"],[84,"t"],[23,"b"],[52,"b"],[65,"b"],[82,"b"],[102,"b"],[13,"u"],[79,"u"],[89,"u"],[111,"u"]],[[51,"t"],[67,"t"],[69,"t"],[85,"t"]],[[52,"t"],[53,"t"],[68,"t"],[86,"t"]],[[54,"t"],[71,"t"],[87,"t"]],[[55,"t"],[70,"t"],[72,"t"],[89,"t"]],[[42,"t"],[71,"t"],[90,"t"],[91,"t"],[42,"b"],[105,"b"],[107,"b"]],[[57,"t"],[74,"t"],[92,"t"]],[[58,"t"],[73,"t"],[75,"t"],[92,"t"],[58,"b"],[94,"b"],[46,"u"]],[[58,"t"],[59,"t"],[74,"t"],[94,"t"]],[[59,"t"],[61,"t"],[77,"t"],[60,"t"]],[[76,"t"],[78,"t"],[95,"t"],[96,"t"],[58,"b"],[78,"b"],[94,"b"],[124,"b"]],[[61,"t"],[77,"t"],[79,"t"],[97,"t"],[46,"b"],[77,"b"],[79,"b"]],[[62,"t"],[63,"t"],[78,"t"],[98,"t"],[63,"b"],[78,"b"],[46,"u"],[67,"u"],[93,"u"],[111,"u"]],[[63,"t"],[99,"t"],[100,"t"]],[[64,"t"],[82,"t"],[100,"t"]],[[65,"t"],[66,"t"],[81,"t"],[101,"t"],[65,"b"],[67,"b"],[100,"b"],[140,"b"]],[[101,"t"],[102,"t"]],[[67,"t"],[85,"t"]],[[68,"t"],[84,"t"],[103,"t"]],[[69,"t"],[103,"t"],[104,"t"],[52,"b"],[87,"b"],[102,"b"],[116,"b"]],[[70,"t"],[88,"t"],[41,"b"],[86,"b"],[105,"b"]],[[87,"t"],[89,"t"],[117,"t"]],[[71,"t"],[88,"t"],[105,"t"],[55,"b"],[105,"b"],[13,"u"],[67,"u"],[128,"u"],[140,"u"]],[[72,"t"],[91,"t"],[105,"t"]],[[56,"t"],[72,"t"],[90,"t"],[105,"t"],[107,"t"]],[[73,"t"],[74,"t"],[93,"t"]],[[92,"t"],[94,"t"],[94,"b"],[79,"u"]],[[75,"t"],[93,"t"],[95,"t"],[74,"b"],[77,"b"],[93,"b"]],[[77,"t"],[94,"t"],[122,"t"]],[[77,"t"],[97,"t"],[109,"t"]],[[78,"t"],[96,"t"],[98,"t"],[109,"t"]],[[79,"t"],[97,"t"],[99,"t"],[110,"t"]],[[80,"t"],[98,"t"],[110,"t"],[112,"t"]],[[80,"t"],[81,"t"],[101,"t"],[112,"t"],[113,"t"],[63,"b"],[82,"b"],[111,"b"]],[[83,"t"],[82,"t"],[100,"t"],[114,"t"]],[[83,"t"],[103,"t"],[115,"t"],[67,"b"],[86,"b"],[127,"b"]],[[85,"t"],[86,"t"],[102,"t"]],[[86,"t"],[116,"t"]],[[89,"t"],[90,"t"],[91,"t"],[106,"t"],[108,"t"],[108,"b"],[87,"b"],[89,"b"],[72,"b"],[107,"b"]],[[105,"t"],[107,"t"]],[[106,"t"],[91,"t"],[119,"t"],[72,"b"],[105,"b"],[161,"b"]],[[105,"t"],[119,"t"],[117,"t"],[105,"b"],[116,"b"],[135,"b"]],[[110,"t"],[97,"t"],[96,"t"],[124,"t"]],[[109,"t"],[99,"t"],[98,"t"],[111,"t"]],[[110,"t"],[112,"t"],[124,"t"],[124,"b"],[100,"b"],[79,"u"],[67,"u"],[163,"u"],[153,"u"]],[[111,"t"],[99,"t"],[100,"t"],[125,"t"]],[[125,"t"],[100,"t"],[114,"t"]],[[113,"t"],[101,"t"],[131,"t"],[132,"t"],[126,"t"],[115,"t"]],[[114,"t"],[102,"t"],[126,"t"],[127,"t"]],[[104,"t"],[127,"t"],[118,"t"],[117,"t"],[127,"b"],[86,"b"],[108,"b"],[142,"b"]],[[116,"t"],[88,"t"],[108,"t"],[129,"t"]],[[116,"t"],[129,"t"],[142,"t"],[134,"t"]],[[107,"t"],[108,"t"],[136,"t"]],[[121,"t"],[144,"t"]],[[120,"t"],[122,"t"],[145,"t"]],[[95,"t"],[123,"t"],[121,"t"],[146,"t"],[144,"b"],[123,"b"]],[[124,"t"],[122,"t"],[137,"t"],[148,"t"],[149,"t"],[122,"b"],[124,"b"],[144,"b"],[165,"b"]],[[123,"t"],[109,"t"],[111,"t"],[130,"t"],[138,"t"],[77,"b"],[123,"b"],[111,"b"],[153,"b"]],[[112,"t"],[131,"t"],[113,"t"]],[[114,"t"],[115,"t"],[140,"t"],[127,"t"]],[[115,"t"],[126,"t"],[133,"t"],[116,"t"],[134,"t"],[133,"b"],[102,"b"],[116,"b"]],[[142,"t"],[143,"t"],[160,"t"],[188,"t"],[172,"t"],[135,"b"],[142,"b"],[161,"b"],[187,"b"],[199,"b"],[185,"u"],[89,"u"],[140,"u"]],[[117,"t"],[118,"t"],[135,"t"],[143,"t"],[142,"t"]],[[131,"t"],[139,"t"],[124,"t"]],[[130,"t"],[114,"t"],[125,"t"]],[[114,"t"],[140,"t"]],[[140,"t"],[127,"t"],[141,"t"],[157,"b"],[140,"b"],[127,"b"]],[[127,"t"],[141,"t"],[118,"t"],[142,"t"]],[[129,"t"],[136,"t"],[161,"t"],[143,"t"],[128,"b"],[108,"b"],[161,"b"]],[[119,"t"],[162,"t"],[135,"t"]],[[147,"t"],[123,"t"]],[[124,"t"],[150,"t"],[152,"t"]],[[130,"t"],[153,"t"],[140,"t"],[154,"t"]],[[132,"t"],[139,"t"],[154,"t"],[156,"t"],[133,"t"],[126,"t"],[154,"b"],[133,"b"],[156,"b"],[82,"b"],[153,"u"],[89,"u"],[128,"u"]],[[133,"t"],[134,"t"],[158,"t"],[142,"t"]],[[118,"t"],[134,"t"],[141,"t"],[158,"t"],[128,"t"],[143,"t"],[129,"t"],[157,"b"],[128,"b"],[116,"b"]],[[129,"t"],[128,"t"],[160,"t"],[135,"t"],[142,"t"]],[[120,"t"],[145,"t"],[177,"t"],[122,"b"],[123,"b"],[163,"b"]],[[144,"t"],[121,"t"],[146,"t"]],[[145,"t"],[147,"t"],[163,"t"],[122,"t"]],[[146,"t"],[137,"t"],[164,"t"]],[[149,"t"],[164,"t"],[123,"t"]],[[148,"t"],[123,"t"],[150,"t"],[165,"t"]],[[151,"t"],[149,"t"],[138,"t"]],[[150,"t"],[165,"t"],[152,"t"],[166,"t"]],[[153,"t"],[151,"t"],[138,"t"]],[[152,"t"],[139,"t"],[166,"t"],[154,"t"],[167,"t"],[180,"b"],[154,"b"],[184,"b"],[124,"b"],[163,"u"],[111,"u"],[140,"u"],[185,"u"]],[[139,"t"],[155,"t"],[140,"t"],[153,"t"],[153,"b"],[156,"b"],[140,"b"]],[[154,"t"],[156,"t"],[167,"t"],[168,"t"]],[[155,"t"],[157,"t"],[140,"t"],[169,"t"],[157,"b"],[154,"b"],[140,"b"],[184,"b"]],[[156,"t"],[170,"t"],[158,"t"],[156,"b"],[142,"b"],[133,"b"],[185,"b"]],[[157,"t"],[141,"t"],[142,"t"],[159,"t"]],[[158,"t"],[172,"t"],[170,"t"],[186,"t"],[198,"t"]],[[128,"t"],[143,"t"],[173,"t"],[161,"t"]],[[160,"t"],[174,"t"],[135,"t"],[128,"b"],[135,"b"],[199,"b"],[107,"b"]],[[136,"t"],[175,"t"]],[[146,"t"],[177,"t"],[144,"b"],[176,"b"],[191,"b"],[111,"u"],[153,"u"]],[[147,"t"],[178,"t"],[148,"t"],[179,"t"]],[[179,"t"],[149,"t"],[151,"t"],[180,"t"],[180,"b"],[123,"b"],[191,"b"]],[[151,"t"],[153,"t"],[181,"t"],[183,"t"]],[[183,"t"],[155,"t"],[168,"t"],[153,"t"]],[[167,"t"],[155,"t"],[184,"t"]],[[156,"t"],[184,"t"]],[[157,"t"],[185,"t"],[159,"t"]],[[199,"t"],[173,"t"],[175,"t"]],[[128,"t"],[159,"t"],[187,"t"]],[[188,"t"],[174,"t"],[160,"t"],[171,"t"]],[[173,"t"],[175,"t"],[161,"t"]],[[174,"t"],[171,"t"],[162,"t"]],[[177,"t"],[189,"t"],[190,"b"],[163,"b"]],[[176,"t"],[144,"t"],[163,"t"]],[[189,"t"],[191,"t"],[164,"t"]],[[191,"t"],[164,"t"],[165,"t"]],[[165,"t"],[181,"t"],[193,"t"],[165,"b"],[190,"b"],[153,"b"],[184,"b"]],[[180,"t"],[166,"t"],[193,"t"],[182,"t"]],[[181,"t"],[195,"t"],[183,"t"]],[[182,"t"],[196,"t"],[167,"t"],[166,"t"]],[[185,"t"],[168,"t"],[169,"t"],[196,"t"],[197,"t"],[180,"b"],[185,"b"],[153,"b"],[156,"b"]],[[184,"t"],[170,"t"],[186,"t"],[184,"b"],[157,"b"],[187,"b"],[153,"u"],[128,"u"]],[[198,"t"],[185,"t"],[159,"t"]],[[198,"t"],[172,"t"],[188,"t"],[128,"b"],[185,"b"]],[[187,"t"],[128,"t"],[173,"t"],[199,"t"]],[[176,"t"],[178,"t"],[190,"t"]],[[189,"t"],[192,"t"],[191,"t"],[176,"b"],[191,"b"],[180,"b"]],[[190,"t"],[178,"t"],[179,"t"],[192,"t"],[190,"b"],[163,"b"],[165,"b"]],[[190,"t"],[191,"t"],[194,"t"]],[[181,"t"],[180,"t"],[194,"t"]],[[193,"t"],[192,"t"],[195,"t"]],[[194,"t"],[182,"t"],[197,"t"]],[[197,"t"],[183,"t"],[184,"t"]],[[196,"t"],[195,"t"],[184,"t"]],[[186,"t"],[187,"t"],[199,"t"],[159,"t"]],[[198,"t"],[188,"t"],[171,"t"],[128,"b"],[161,"b"]]]
loco = []
loco.append(int(raw_input("Starting location\n")))
trav = raw_input("First Ticket\n't' for Taxi\n'b' for Bus\n'u' for Underground\n")
p =[]
while trav != "end":
    for t in loco:
        for i in taxi[t-1]:
            if i[1] == trav:
                p.append(i[0])
    p = list(set(p))
    p.sort()
    print "\n"
    print p
    loco = p
    p = []
    trav = raw_input("\nNext Ticket\nOr 'end' to finish\n")
